<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description"
        content="Build and Run your Python code instantly. Online-Python is a quick and easy tool that helps you to build, compile, test your python programs.">
    <meta name="keywords"
        content="online python compiler, online python ide, online python interpreter, python online interpreter, online python editor, online python 3, online python code runner, run python script online, online python code editor, online python syntax checker, online python with numpy, online python text editor, python online ide free, online python editor free">
    <meta name="author" content="online-python">
    <meta name="copyright" content="ShareAlike">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <title>Online Python - IDE, Editor, Compiler, Interpreter</title>

    <!-- Stylesheets -->
    <link rel="stylesheet"
        href="https://www.online-python.com/assets/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="https://www.online-python.com/assets/dist/css/ide.css?v=a1">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css">

    <!-- JavaScript -->
    <script src="https://www.online-python.com/assets/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="https://www.online-python.com/assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.8/ace.js" type="text/javascript"
        charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.8/ext-language_tools.min.js" type="text/javascript"
        charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.8/ext-settings_menu.min.js" type="text/javascript"
        charset="utf-8"></script>
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.8/ext-keybinding_menu.min.js"
        type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.2/split.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"></script>
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
    <style>
        .dark-theme {
            background-color: black;
            color: white;
        }

        .light-theme {
            background-color: transparent;
            color: black;
        }
    </style>
</head>

<body>
    <div>
        <nav class="nav navbar-top primary">
            <h1 class="nav_logo">
                <span>CLOUD COMPUTING - IDE</span>
            </h1>
        </nav>
        <div class="container" id="container">
            <!-- Fila para los nombres de los integrantes -->
            <h1 class="text-center">Integrantes</h1>
            <h5 class="text-center"> Alex Neyra - Paul Supo - Moises Salazar</h5>

            <!-- Fila para detalles de conexión y solicitud -->
            <div class="row text-center">
                <div class="col-12 col-md-6 col-lg-6">
                    <h3>Detalles de Conexión</h3>
                    <div id="conexion-detalles">
                        <p><strong>Host IP:</strong> {{host_ip}}</p>
                        <p><strong>Hostname:</strong> <span id="conexion-hostname">{{server_info.hostname}}</span>
                        </p>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-6">
                    <h3>Detalles de Solicitud</h3>
                    <div id="solicitud-detalles">
                        <p><strong>Hostname:</strong> <span id="solicitud-hostname"></span></p>
                        <p><strong>Sistema:</strong> <span id="solicitud-sistema"></span></p>
                        <p><strong>Versión del Sistema:</strong> <span id="solicitud-version"></span></p>
                    </div>
                </div>
            </div>
            <div id="header-control" class="col-12">
                <div class="btn-group">
                    <!-- Botones para Ruby, PHP y JavaScript -->
                    <button type="button" class="btn btn-default btn-custom" onclick="switchToPython()"
                        data-toggle="tooltip" data-container="body" data-placement="right" title="Python"><i
                            class="fab fa-python"></i></button>
                    <button type="button" class="btn btn-default btn-custom" onclick="switchToCpp()"
                        data-toggle="tooltip" data-container="body" data-placement="right" title="C++"><i
                            class="fab fa-cuttlefish"></i></button>
                    <button type="button" class="btn btn-default btn-custom" onclick="switchToJavaScript()"
                        data-toggle="tooltip" data-container="body" data-placement="right" title="JavaScript"><i
                            class="fab fa-js"></i></button>
                    <button type="button" class="btn btn-default btn-custom" onclick="switchToRuby()"
                        data-toggle="tooltip" data-container="body" data-placement="right" title="Ruby"><i
                            class="fas fa-gem"></i></button>
                    <button type="button" class="btn btn-default btn-custom" onclick="switchToPhp()"
                        data-toggle="tooltip" data-container="body" data-placement="right" title="PHP"><i
                            class="fab fa-php"></i></button>
                    <button type="button" class="btn btn-default" id="toggle-theme" data-toggle="tooltip"
                        data-container="body" data-placement="left" title="Change Theme"><i
                            class="fas fa-moon fa-lg"></i></button>
                    <button type="button" class="btn btn-default" onclick="about_modal()" id="info"
                        data-toggle="tooltip" data-container="body" data-placement="left" title="About Site"><i
                            class="fas fa-info-circle"></i></button>
                    <button type="button" class="btn btn-success btn-custom" onclick="runCode()" data-toggle="popover"
                        data-placement="bottom" data-trigger="hover" data-content="F8"><i
                            class="fa fa-play"></i>&ensp;<strong>Run</strong></button>
                </div>

            </div>
            <div class="row container" style="padding-top: 50px;">
                <div id="mi" class="col-12 col-lg-7">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="active" id="editor-1"><a id="main-id">main.py</a></li>
                    </ul>

                    <div id="editor"></div>
                    <div class="boxed" id="editor_footer"></div>

                </div>

                <div id="d" class="col-12 col-lg-4" >
                    <div class="boxed1" id="output_header">
                        <div id="hint-section"></div>
                        <div class="btn-group status" id="tool-btn">
                            <button type="button" data-toggle="tooltip" data-container="body" data-placement="right"
                                title="Clear" class="btn btn-default btn-sm status" onclick="clear_output()"><i
                                    class="fas fa-eraser"></i></button>
                        </div>
                        &ensp;
                        <div id="output-status">
                            <p></p>
                        </div>
                    </div>
                    <div id="terminal">
                        <div id="progress-status"></div>
                        <div class="boxed2" id="output" style="display: block;">
                            <div class="wrapper" id="wrap">
                            </div>
                        </div>

                        <div id="terminal-ad">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script type="text/javascript">
        var editor = ace.edit("editor");

        // Agregar el complemento ext-language_tools
        ace.require("ace/ext/language_tools");

        function setEditorLanguage(languageMode) {
            // Configurar el lenguaje del editor
            editor.session.setMode("ace/mode/" + languageMode);

            var code;
            switch (languageMode) {
                case "python":
                    code = "# Código Python predeterminado\nprint('Hola, mundo!')";
                    break;
                case "c_cpp":
                    code = "// Código C++ predeterminado\n#include <iostream>\nint main() {\n    std::cout << \"Hola, mundo!\" << std::endl;\n    return 0;\n}";
                    break;
                case "ruby":
                    code = "# Código Ruby predeterminado\nputs 'Hola, mundo!'";
                    break;
                case "php":
                    code = "<?php\n// Código PHP predeterminado\necho 'Hola, mundo!';\n?>";
                    break;
                case "javascript":
                    code = "// Código JavaScript predeterminado\nconsole.log('Hola, mundo!');";
                    break;
                default:
                    code = "";
            }

            // Configura el contenido del editor con el código predeterminado
            editor.setValue(code);

            // Configurar autocompletado específico para el nuevo lenguaje
            editor.setOptions({
                enableBasicAutocompletion: true,
                enableSnippets: true,
                enableLiveAutocompletion: true
            });

        }

        // Función para cambiar a Python
        function switchToPython() {
            $('#main-id').text('main.py');
            setEditorLanguage("python");
        }

        // Función para cambiar a C++
        function switchToCpp() {
            $('#main-id').text('main.cpp');
            setEditorLanguage("c_cpp");
        }

        // Función para cambiar a JavaScript
        function switchToJavaScript() {
            $('#main-id').text('main.js');
            setEditorLanguage("javascript");
        }

        // Función para cambiar a Ruby
        function switchToRuby() {
            $('#main-id').text('main.rb');
            setEditorLanguage("ruby");
        }

        // Función para cambiar a PHP
        function switchToPhp() {
            $('#main-id').text('main.php');
            setEditorLanguage("php");
        }

        // Configurar el editor para Python por defecto al cargar la página
        switchToPython();

        $('#undo-editor').click(function (e) {
            editor.session.getUndoManager().undo();
            undo_redo_update();

        });

        let theme = localStorage.getItem('theme') !== undefined ? localStorage.getItem('theme') : 'light'

        if (theme === 'dark') {
            $('body').addClass('dark');
            document.getElementById('toggle-theme').innerHTML = '<i class="fas fa-sun fa-lg"></i>';
            editor.setTheme("ace/theme/tomorrow_night_bright");
        }

        $('#toggle-theme').click(function (e) {
            document.body.classList.toggle('dark');
            if ($('body').hasClass("dark")) {
                editor.setTheme("ace/theme/tomorrow_night_bright");
                document.getElementById('toggle-theme').innerHTML = '<i class="fas fa-sun fa-lg"></i>';
                localStorage.setItem('theme', 'dark');
            } else {
                editor.setTheme("ace/theme/textmate");
                document.getElementById('toggle-theme').innerHTML = '<i class="fas fa-moon fa-lg"></i>';
                localStorage.setItem('theme', 'light');
            }
            $('#toggle-theme').blur();
            $('[data-toggle="tooltip"]').tooltip('hide');
        });

        editor.focus();
        editor.navigateFileEnd();

        update_editor_footer();

        editor.selection.on('changeCursor', function (e) {
            update_editor_footer();
        });

        editor.selection.on('changeSelection', function (e) {
            update_editor_footer();
        });

        $('.status button').attr('disabled', 'disabled');
        $('#stop-btn').attr('disabled', 'disabled');

        $('#output').on('click', function () {
            $('#term-input').focus();
        });

        window.onbeforeunload = goodbye;
        // Función para ejecutar el código y mostrar "Hola Mundo" en la consola HTML
        function runCode() {
            // Obtiene el código ingresado por el usuario
            var url = "";  // Inicializa la URL vacía

            // Verifica la extensión del archivo
            if ($('#main-id').text() === 'main.py') {
                url = "http://127.0.0.1:32319/pyeval";  // URL para Python
            } else if ($('#main-id').text() === 'main.cpp') {
                url = "http://127.0.0.1:32319/cpluseval";  // URL para C++
            } else if ($('#main-id').text() === 'main.js') {
                url = "http://127.0.0.1:32319/jseval";  // URL para JavaScript
            } else if ($('#main-id').text() === 'main.rb') {
                url = "http://127.0.0.1:32319/rubyeval";  // URL para Ruby
            } else if ($('#main-id').text() === 'main.php') {
                url = "http://127.0.0.1:32319/phpeval";  // URL para PHP
            } else {
                // Maneja el caso por defecto si la extensión no coincide con ninguna de las anteriores
                console.error("Extensión de archivo no compatible");
            }

            var code = editor.getValue();

            // Realiza una solicitud POST a /pyeval con el código
            $.ajax({
                type: "POST",
                url: url, // Cambia la URL según la ruta de tu aplicación Flask
                data: JSON.stringify({ "code": code }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    clear_output();
                    // Obtiene el resultado de la clave "result" en data
                    var result = data.result;

                    // Obtiene el valor de la clave "error" en data
                    var error = data.error;

                    // Verifica si hay un resultado y lo muestra
                    // Verifica si hay un resultado y lo muestra
                    if (result) {
                        console.log(result);

                        // Crear un elemento <pre> para el resultado preformateado
                        var preElement = document.createElement("pre");
                        preElement.textContent = result;
                        if (theme == 'dark') {
                            preElement.classList.remove('light-theme');
                            preElement.classList.add('dark-theme');
                        } else {
                            preElement.classList.remove('dark-theme');
                            preElement.classList.add('light-theme');
                        }
                        // Agregar el elemento <pre> al "wrap"
                        $("#wrap").append(preElement);
                    }


                    if (error) {
                        // Divide el resultado en párrafos
                        var errors = error.split("\r\n");

                        // Agrega cada párrafo como un nuevo elemento <p> al "wrap"
                        for (var i = 0; i < errors.length; i++) {
                            var nuevoParrafo = document.createElement("p");
                            nuevoParrafo.textContent = errors[i];
                            $("#wrap").append(nuevoParrafo);
                        }
                    }

                    // Supongamos que tienes los datos en una variable llamada data.machine_info
                    var machineInfo = data.machine_info;

                    // Llena los elementos <span> con los datos correspondientes
                    document.getElementById("solicitud-hostname").textContent = machineInfo.hostname;
                    document.getElementById("solicitud-sistema").textContent = machineInfo.system;
                    document.getElementById("solicitud-version").textContent = machineInfo.release;


                },
                error: function (error) {
                    console.log(error);
                    // Maneja errores si los hay
                    $("#wrap").empty();
                    $("#wrap").text("Error: " + JSON.stringify(error, null, 2));
                }
            });
        }

        function clear_output() {
            $("#wrap").empty();
        }
    </script>
</body>

</html>